import{i as r,b as m,q as f,j as n,J as h,t as s,l as c,v,n as p,w as _}from"./index-3XvheVGP.js";import{u as j}from"./index-DNfkk2nW.js";function w(d){return r`count(${r.raw("*")})`.mapWith(Number)}new Date("2025-06-07T03:00:00.000Z").getTime();function g(){return j()}const y="_layout_l0jaq_1",x="_inner_l0jaq_7",I="_title_l0jaq_11",b="_levels_l0jaq_19",q="_levelItem_l0jaq_26",i={layout:y,inner:x,title:I,levels:b,levelItem:q},L=function(){const a=m(),o=f(),u=async e=>{const l=await a.select({count:w(),finishedAt:s.finishedAt}).from(s).where(c(s.levelId,e)).groupBy(s.finishedAt);if(l.length===0){if(!confirm("해당 레벨의 데이터가 없어요. 다운로드 받을까요?"))return;await v(a,e)}if(l.find(t=>t.finishedAt===null)){const t=await a.select({id:s.id}).from(s).where(p(c(s.levelId,e),_(s.finishedAt))).limit(1);navigator.vibrate(100),o({to:"/$sess",params:{sess:t[0].id},viewTransition:{types:["slide-left"]}})}else{const t=await a.insert(s).values({levelId:e,id:g()}).returning({id:s.id});navigator.vibrate(100),o({to:"/$sess",params:{sess:t[0].id},viewTransition:{types:["slide-left"]}})}};return n.jsx("main",{className:i.layout,children:n.jsxs("div",{className:i.inner,children:[n.jsx("h1",{className:i.title,children:"JLPT 레벨 선택"}),n.jsx("nav",{className:i.levels,children:h.map(e=>n.jsx("button",{type:"button",className:i.levelItem,onClick:()=>u(e),children:e},e.toString()))})]})})};export{L as component};
