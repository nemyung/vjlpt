[{"sql":["CREATE TABLE \"expressions\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"expression\" text NOT NULL\n);\n","\nCREATE TABLE \"levels\" (\n\t\"id\" text PRIMARY KEY NOT NULL\n);\n","\nCREATE TABLE \"meanings\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"reading_id\" char(26) NOT NULL,\n\t\"meaning\" text NOT NULL\n);\n","\nCREATE TABLE \"readings\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"expression_id\" char(26) NOT NULL,\n\t\"levelId\" text NOT NULL,\n\t\"furigana\" text NOT NULL,\n\tCONSTRAINT \"expression_furigana_unq\" UNIQUE(\"expression_id\",\"furigana\")\n);\n","\nCREATE TABLE \"session_reading_interactions\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"session_id\" char(26) NOT NULL,\n\t\"reading_id\" char(26) NOT NULL,\n\t\"status\" text NOT NULL\n);\n","\nCREATE TABLE \"sessions\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"levelId\" text\n);\n","\nALTER TABLE \"meanings\" ADD CONSTRAINT \"meanings_reading_id_readings_id_fk\" FOREIGN KEY (\"reading_id\") REFERENCES \"public\".\"readings\"(\"id\") ON DELETE cascade ON UPDATE cascade;","\nALTER TABLE \"readings\" ADD CONSTRAINT \"readings_expression_id_expressions_id_fk\" FOREIGN KEY (\"expression_id\") REFERENCES \"public\".\"expressions\"(\"id\") ON DELETE cascade ON UPDATE cascade;","\nALTER TABLE \"readings\" ADD CONSTRAINT \"readings_levelId_levels_id_fk\" FOREIGN KEY (\"levelId\") REFERENCES \"public\".\"levels\"(\"id\") ON DELETE cascade ON UPDATE cascade;","\nALTER TABLE \"session_reading_interactions\" ADD CONSTRAINT \"session_reading_interactions_session_id_sessions_id_fk\" FOREIGN KEY (\"session_id\") REFERENCES \"public\".\"sessions\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"session_reading_interactions\" ADD CONSTRAINT \"session_reading_interactions_reading_id_readings_id_fk\" FOREIGN KEY (\"reading_id\") REFERENCES \"public\".\"readings\"(\"id\") ON DELETE cascade ON UPDATE no action;"],"bps":true,"folderMillis":1749352497310,"hash":"6cab22e76f1aea384b41771a41438d5a0fa8c70f81e6f27e9dc77adbaf524579"},{"sql":["ALTER TABLE \"sessions\" ADD COLUMN \"finished_at\" timestamp;"],"bps":true,"folderMillis":1749354044817,"hash":"5eda2e1c8898f0068dceb50aa754c24ccb663a4276f5df318d6068593a0358d4"},{"sql":["ALTER TABLE \"sessions\" ALTER COLUMN \"levelId\" SET NOT NULL;","\nALTER TABLE \"sessions\" ADD CONSTRAINT \"sessions_levelId_levels_id_fk\" FOREIGN KEY (\"levelId\") REFERENCES \"public\".\"levels\"(\"id\") ON DELETE cascade ON UPDATE cascade;","\nALTER TABLE \"session_reading_interactions\" ADD CONSTRAINT \"session_reading_unq\" UNIQUE(\"session_id\",\"reading_id\");"],"bps":true,"folderMillis":1749370787514,"hash":"ba98c56ba69d1915d1ed79528fd2e4d782425755708526ab1bfbaec24887644c"},{"sql":["DROP TABLE \"session_reading_interactions\" CASCADE;","\nDROP TABLE \"sessions\" CASCADE;"],"bps":true,"folderMillis":1749993534612,"hash":"91c20cf123624cdd3981d479f35d0c0ee13eaa8640913edb6b1407fb15eff7d1"},{"sql":["CREATE TABLE \"review_logs\" (\n\t\"id\" char(26) PRIMARY KEY NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL,\n\t\"reading_id\" char(26) NOT NULL,\n\t\"rating\" integer NOT NULL,\n\t\"time_reviewed\" timestamp DEFAULT now() NOT NULL,\n\t\"elapsed_days\" integer NOT NULL,\n\tCONSTRAINT \"elapsed_days_non_negative\" CHECK (\"review_logs\".\"elapsed_days\" >= 0)\n);\n","\nCREATE TABLE \"vocabulary_learning_progress\" (\n\t\"reading_id\" char(26) PRIMARY KEY NOT NULL,\n\t\"stability\" real NOT NULL,\n\t\"difficulty\" real NOT NULL,\n\t\"last_review_date\" timestamp NOT NULL,\n\t\"next_review_date\" timestamp NOT NULL,\n\t\"lapses\" integer DEFAULT 0 NOT NULL,\n\t\"learning_steps\" integer DEFAULT 0 NOT NULL,\n\t\"reps\" integer DEFAULT 0 NOT NULL,\n\t\"status\" text DEFAULT 'new' NOT NULL,\n\t\"time_created\" timestamp DEFAULT now() NOT NULL,\n\t\"time_updated\" timestamp DEFAULT now() NOT NULL\n);\n","\nALTER TABLE \"review_logs\" ADD CONSTRAINT \"review_logs_reading_id_readings_id_fk\" FOREIGN KEY (\"reading_id\") REFERENCES \"public\".\"readings\"(\"id\") ON DELETE cascade ON UPDATE no action;","\nALTER TABLE \"vocabulary_learning_progress\" ADD CONSTRAINT \"vocabulary_learning_progress_reading_id_readings_id_fk\" FOREIGN KEY (\"reading_id\") REFERENCES \"public\".\"readings\"(\"id\") ON DELETE cascade ON UPDATE no action;"],"bps":true,"folderMillis":1750034833960,"hash":"6114533943199d843eca30a675e2f624066e05227a09903cffba575c4d4e286f"}]